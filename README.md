##无线Web开发者指南

====================

###无线Web开发简介


无线Web开发是基于智能手机上的游览器进行的Web开发。现在智能手机主要有Android和IOS两种操作系统的，因此基于手机Web的开发，主要是基于Android和IOS两种操作系统上的web开发。

基于两种操作系统的Web开发的共同点：

* 两者的浏览器引擎是基于webkit的，因此基于手机上的Web开发，主要是基于webkit的游览器开发，对于其他浏览器，例如firefox、ie和opera等游览器，可以不用做兼容考虑。
* 两者都是按照HTML5规范开发，因此对于HTML5的特性支持性都比较好。

不同点：

* android的厂商碎片化比较严重，加上由于webkit的开源特性，导致市面上有非常多的修改版webkit游览器，
这些修改版的webkit，厂商会根据自己的需求对webkit进行修改，导致对HTML5的特性碎片化严重。
同时HTML5标准不同厂商的实现不同，造成对于HTML5特性的支持度不同。
以input type=date 日期控件为例，有些厂商实现了该标准，有些厂商没有实现该标准，就算实现了标准的厂商，
对于日期控件的展现、交互也不尽相同。
* android的版本碎片化，android到本文档撰写为止，发展到了4.4的版本，对于web开发而言，主要分为两个阶段2.X和4.X的阶段，由于3.X是为TV等操作系统而做，2.X采用的webkit核心的版本是533.x版本，533的版本，是谷歌专门为当时的手机性能定制的，由于当时的手机，硬件性能不是很好，因此对于533版本的webkit游览器的实现是精简版的，因此对于HTML5标砖的实现不是非常彻底，并且对于某些实现还做了特定保留。此系列版本又可分为2.2以及以下和2.3版本，对于2.2以及下面的版本，对于html5的支持性不是很好，并且即使实现了，对于某些细节实现的比较有问题。2.3版本可以说是一次飞跃，在2.3的版本上，开始移植pc版chrome的核心代码实现，因此从2.3开始，android的web开发开始了新的旅程。
* ios由于其封闭性，并且苹果公司严格按照html5的规范来进行实现，因此在ios上html5的规范实现的较好。
* ios和android对于html5的规范实现在界面层和交互层的实现是不同的，就拿上面的列子来说 type date的日期控件，ios和android的交互实现，完全不同。虽然都按照w3c的标准进行了实现。这个也是在日常web开发中需要注意的。

--------

### 无线Web开发需要注意的问题

#### HTML标签

##### meta的viewport
在无线Web开发中，在head头部遇到最常见的问题，就是viewport的设置

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0"/>
	
对于这里面的设置，大家可以Google一下，有非常详细的叙述，我这里不太重复,以下有几个地址，大家可以做下参考
https://developer.mozilla.org/en-US/docs/Mozilla/Mobile/Viewport_meta_tag
https://developer.apple.com/library/safari/documentation/appleapplications/reference/SafariHTMLRef/Articles/MetaTags.html
等，其实更加具体的，大家可以再overstackflow或者google进行查询。

最佳实践：

* 一般情况下，在所有无线页面的头部，都要加上此viewport的设置，如果不加上此数值，会造成在某些webkit游览器中，
游览器会根据自身的某些判断，自行做放大、缩小等，造成页面无法正常访问，特别是某些app中嵌入了webkit游览器来进行访问的时候，
会出现以上所说的情况，因此为了保证你说设计的网页在所有手机中显示保持一致，加上此设置
* viewport中的设置数值一般不需要进行修改，因为现在的数值已经满足了绝大多数项目，当然会出现在非常特殊的页面里，
需要用户进行手动缩放的操作，不过如果修改了数值，需要在不同的手机上进行详细的测试，否则会有你预期外的事情发生。

**HTML5的标签使用**

在无线Web的开发中，大家会经常使用HTML5的tag标签，对于HTML5的大多数标签使用起来不会遇到问题，
比如说nav、footer、article等标签，这些展示型的标签一般可以安全使用，如果不是非常确定某个HTML5标签是否可以使用，建议参考http://caniuse.com/。

##### input标签
此类标签是非常特殊的标签，因为这个是和用户交互最紧密的一类标签，也是问题最多的一类标签。
IOS和Android在HTML5标签上最大的区别莫过于input类型的标签，并且不同Android机对于input类型的实现也大有不同，同时不同的类型的input，会弹出不同的键盘类型，特别是ios。一般在开发过程中常常会碰到需要弹出键盘的需求，以下可以做参考。这些控件的一个比较重要的特点是交互界面由浏览器实现，无法通过css、html来进行定制，因此对于日常评审交互搞、视觉稿的需求的时候，一定要非常谨慎，可能多一个逗号，都是修改不了的。
下面列出比较保险的几个类型：

* text:文本 此类型说明输入框为文本信息,对应的键盘而言，Android和ios都会弹出全键盘。
* passsword：密码 在手机上和PC上的交互有所不同，这个需要注意
* button、checkbox、radio、reset、submit等 这些控件都可以使用，不过需要注意在Android和ios的手机上，控件的样式会所有不同，如果想完全掌控样式，需要reset一下-webkit-appearance:none，之后在设置自己需要的样式。

需要谨慎使用的类型：

* email、search、tel、url等类型，这些标签的外观和text类型一致，除了search，会有圆角。最主要的区别在于弹出的键盘，对于ios而言，由于其html5规范支持的较好，因此基本都能弹出其指定的键盘。不过非常遗憾，没有money类型，因此无法弹出ios的money键盘。对于Android就比较杯具，由于各个厂商对于html5的规范支持不统一，造成对于以上的类型，弹出的键盘根绝各种机型的不同而不同。
* file类型是相当特殊的类型标签，对于ios而言，它已经实现file，不过它唤起的文件现在只有在照片集里的图片文件，在ios7的版本里，还实现了拍照和录像功能，不过在7.0.3里有bug，程序会闪退。对于android里如果使用的是浏览器，file类型的文件选择，会唤起浏览器实现的文件选择，不过文件的选择不同的手机，具体实现不同，web无法控制。如果在android app里使用webkit的方式，需要android的webkit实现私有api接口，才能实现file选择上传，这个大家可以通过google查看。
* date类型，这个也是在手机web开发中非常常用的一个控件，对于这个控件在使用上，需要注意，在ios平台上，由于ios7进行了大规模的平面化设计，因此在ios7和之前的系统，系统弹出的控件界面和交互是不同的，这个需要注意，并且在ios3没有实现date类型。Android对于date日期控件的实现非常碎片化，一般而言4.X,大厂商的手机游览器实现的较好。
* range、color、month、datetime、time、week由于受平台和手机的限制太多，不推荐使用。

##### **定制控件的问题**
由于上诉的问题，经常会收到这种需求，就是非常渴望去完整实现某个控件，在PC端，由于发展了很多年，机制较为完整，可以用js来模拟实现，不过在手机端，由于手机、平台等各方因素，使用js来模拟某个控件并不是一个明智之举。各种经验表明，使用js来模拟的控件，在某些机型和平台上会出现非常诡异而又无法解决的问题。**因此对于定制控件，除非你有非常大的把握，否则不要轻易触碰，这个是过来人的忠告。**

#### CSS3
手机浏览器对于CSS3的支持，总体上支持的比较好，不过由于Android的碎片化，手机碎片化以及IOS的各种版本，在很多地方需要谨慎操作。
CSS3有很多类型，大致可以分为以下两种类型。布局类型、渲染类型。
##### CSS reset
在讲以上布局之前，需要说一下关于CSS的reset的问题。关于这个问题，需要追溯到HTML4的时代，在那个时候，由于PC有各种游览器、各种标准、造成对于HTML的各个标签所带的默认样式的不同，结果造成要在各个平台统一一个样式会非常难。因此出现了reset，所谓reset的意思是把所有HTML的标签的默认样式进行重置，这样方便在所有平台进行页面制作开发。跨入无线Web的时代之后，reset是否还要存在，业界有着非常多的讨论。主要分为两派：reset派和normalize派。reset派认为就算是到了移动时代，还是有各种碎片化的问题，需要reset，而normalize的一派认为，到了无线Web，很多规范已经收到了很多厂商的支持，最出名的要属Google和苹果，因此不需要进行reset，只需要将那些标签进行统一化，即可。

因此，在市面上做移动开发，有两种CSS模式，reset模式和normalize的模式。个人认为，两者没有绝对的好与坏。主要看这个项目的特性。

* reset模式 适用于严格要求所有的平台必须完全按照统一的一个形态的进行开发的项目，一般而言，对于webapp的类型的项目，可能使用reset更加适合。reset模式也适合UI控件的编写，因为UI控件有着严格的标准，使用reset，可以更加好的进行精确控制。
* normalize模式 此模式适用于Web特性的网站，所谓Web特性的网站，是指那种适合各种平台，并且在不同的平台需要体验各平台自己特性的网站，不需要强制要求所有平台进行统一。

不过就大多数项目而言，一般产品经理和交互都会要求在各个平台需要有个统一的产品表现，因此在实际项目里，reset可能用的会更多一点。

##### 布局类型
布局类型的CSS，是指这些属性影响着HTML的布局方式。HTML4最经典要属position、float等这些使用频率极高的属性，对于它的使用方式，估计无数文档已经有了，我这里不在不在复述。在以下介绍一种布局类型：flex。在以前的开发过程中，可能对于前端开发者而言，最痛苦的，莫过于水平布局，在table布局遭到唾弃之后，div的布局兴起，大量开始使用float的布局，不过使用float布局，也有其痛点，就是float的实现在不同游览器的实现，特别是IE系列中的 6、7等，表现很诡异，需要非常多的trick，才能保证没问题。进入移动时代，可以使用flex布局。

对于flex的布局，大家可以网上进行google，这里不进行描述，对于flex的使用方式，到处都有，我这里所说的，是其中隐含的潜规则。
* flex的三个版本，flex有三个版本，分别对应于display: box、display: flexbox、display: flex，对于android和ios而言，使用box这种，以下是flex的不同版本对应的兼容性

First Header | Second Header | Third Header
------------ | ------------- | ------------
Content Cell | Content Cell  | Content Cell
Content Cell | Content Cell  | Content Cell
<table>
<tr>
	<td>Chrome</td><td>Safari</td><td>Firefox</td><td>Opera</td><td>IE</td><td>Android</td><td>iOS</td>
</tr>
<tr>
	<td>21+ (modern) 20- (old)</td><td>3.1+ (old)</td><td>2-21 (old) 22+ (new)</td><td> 12.1+ (modern)</td><td>10+ (hybrid)</td><td>2.1+ (old)</td><td>3.2+ (old)</td>
</tr>		
</table>